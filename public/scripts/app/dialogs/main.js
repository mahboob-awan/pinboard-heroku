define(["app"],function(a){var b=function(b){this.openDlg=function(){d.style.display="block";var a=this;if(b.onOpen!==undefined&&typeof b.onOpen=="function"){try{b.onOpen.call(this)}catch(c){}a.resize()}else a.resize()},this.resize=function(){var c=b.width!==undefined?b.width:500,d=Math.max(document.body.scrollTop,document.documentElement.scrollTop),e=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),g=document.documentElement.clientWidth,h=document.documentElement.clientHeight;f.style.width=c+"px",f.style.display="block";var i=f.offsetHeight,j=Math.max(Math.round((h-i)/2),10)+d,k=Math.round((g-c)/2)+e;b.elementsToHide&&h<i&&a.each(b.elementsToHide,function(b){a.hide(a.select(b))}),f.style.left=k+"px",f.style.top=j+"px"},this.closeDlg=function(a){try{b.onClose!==undefined&&typeof b.onClose=="function"&&b.onClose.call(this),j=document.getElementsByTagName("body")[0],j.removeChild(d),j.removeChild(f)}catch(a){}};if(document.getElementById(b.prefix+"-overlay")===null){var c=a.eventListener,d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.documentElement.clientWidth+100,h=document.documentElement.clientHeight+100;d.id=b.prefix+"-overlay",d.style.cssText="top:0;left:0;width:"+g+"px;height:"+h+"px;background:#777777;opacity: .7;filter:alpha(opacity=70);"+"z-index:"+b.zindex+";cursor:pointer;position:fixed;display:none;overflow:auto",f.id=b.prefix+"-container",f.style.cssText="opacity: 1;position:absolute;background:#ffffff;z-index:"+(b.zindex+1)+";padding:0;border:5px solid #252525;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;"+"-moz-box-shadow:0px 0px 5px #444444;-webkit-box-shadow:0px 0px 5px #444444;box-shadow:0px 0px 5px #444444"+";display:none",e.id=b.prefix+"-closeBtn",e.style.cssText='position:absolute;top:-15px;right:-15px;cursor:pointer;width:30px;height:30px;background:transparent url("'+a.widgetRoot+'/images/cross.png");';var i=this;c(e,"click",function(a){i.closeDlg()}),c(d,"click",function(a){i.closeDlg()}),f.innerHTML=b.html,f.appendChild(e);var j=document.getElementsByTagName("body")[0];j.appendChild(d),j.appendChild(f)}else var d=document.getElementById(b.prefix+"-overlay"),e=document.getElementById(b.prefix+"-closeBtn"),f=document.getElementById(b.prefix+"-container");this.openDlg();return this};return b})